<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Telegram Mini App Login</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
  <h2>Logging you in… ⏳</h2>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script>
    const tg = window.Telegram.WebApp;

    if (!tg.initData) {
      document.body.innerHTML = "<h2>❌ Open this inside Telegram @africacryptologinbot</h2>";
      throw new Error("Not inside Telegram");
    }

    fetch("https://teligramloginbackend-six.vercel.app/auth/telegram/callback", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        initData: tg.initData
      })
    })
    .then(res => res.text())
    .then(html => {
      document.open();
      document.write(html);
      document.close();
    });
  </script>
</body>
</html>
